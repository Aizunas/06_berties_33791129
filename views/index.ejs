<!doctype html>
<html>
  <head>
    <title>Welcome to <%= shopData.shopName %></title>
    <link rel="stylesheet" type="text/css" href="/main.css" />
  </head>
  <body>
    <h1>Welcome to <%= shopData.shopName %></h1>

    <!-- Session-based login/logout links -->
    <% if (session && session.userId) { %>
      <p>
        Welcome, <%= session.displayName || session.userId %> |
        <a href="<%= shopData.basePath || '' %>/logout">Logout</a>
      </p>
    <% } else { %>
      <p>
        <a href="<%= shopData.basePath || '' %>/users/login">Login</a> |
        <a href="<%= shopData.basePath || '' %>/users/register">Register</a>
      </p>
    <% } %>

    <!-- Navigation links -->
    <p><a href="<%= shopData.basePath || '' %>/about">About <%= shopData.shopName %></a></p>
    <p><a href="<%= shopData.basePath || '' %>/books/search">Search for books</a></p>
    
    <!-- Protected pages: only show links if logged in -->
    <% if (session && session.userId) { %>
      <p><a href="<%= shopData.basePath || '' %>/books/list">Book List</a></p>
      <p><a href="<%= shopData.basePath || '' %>/books/add">Add Book</a></p>
    <% } else { %>
      <p>Login to see book list or add a book.</p>
    <% } %>

    <!-- Search form: always visible -->
    <form action="/books/search-result" method="GET">
        <input type="text" name="keyword" placeholder="Search books" required>
        <button type="submit">Search</button>
    </form>

  </body>
</html>
